```python
class Solution:
    def subarraySum(self, nums: List[int], k: int) -> int:
        s = accumulate(nums, initial=0)
        ans = 0
        d = defaultdict(int)

        for x in s:
            if x - k in d:
                ans += d[x - k]
            d[x] += 1
        
        return ans
```

这道题是 **计数 + 数组可负** 问题，不能用滑窗。因为滑窗需要更新 left（右移）的目标函数具有单调性（存在负数使目标函数的更新失去单调性）
目标是 **最值/存在性** 的问题更适合滑窗

这种 **计数** 问题适合==前缀和 + 哈希计数==

```python
class Solution:
    def subarraySum(self, nums: List[int], k: int) -> int:
        pre_sum = 0
        ans = 0
        d = defaultdict(int)
        d[0] = 1

        for x in nums:
            pre_sum += x
            if pre_sum - k in d:
                ans += d[pre_sum - k]
            d[pre_sum] += 1
        
        return ans
```

如果不 accumulate，也没有 initial，那么应该先初始化 `d[0] = 1`，再在循环里先更新前缀和，再查表，再更新表


#数组 #哈希表 #前缀和
